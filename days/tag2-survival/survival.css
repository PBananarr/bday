/* Tag 2 – Theme: Erde · Moosgrün · Signalorange */
body.tag-tag2-survival{
  --bg:#0d1410;         /* dunkles Waldgrün-Schwarz */
  --card:#111b14;       /* tiefes Moosgrün */
  --border:#2b3c2f;     /* Moosrand */
  --text:#e9f6e7;       /* sehr helles Grün/Off-White */
  --muted:#a7c2ac;      /* graugrün */
  --accent:#fb923c;     /* Signalorange */
  --ok:#22c55e;         /* grün ok */
  --warn:#f59e0b;
  --err:#ef4444;
}

body.tag-tag2-survival .card{
  background: linear-gradient(180deg, rgba(17,27,20,.98), rgba(12,20,15,.92));
  box-shadow: 0 10px 28px rgba(0,0,0,.5);
  border-radius: 18px;
}

body.tag-tag2-survival .btn.primary{
  background: linear-gradient(180deg,#fb923c,#ea580c);
  border-color:#b45309; color:#1a130c;
}
body.tag-tag2-survival .btn.ghostbtn{
  border-color:#384a3c; color:#fb923c;
}

body.tag-tag2-survival .progress{
  background: linear-gradient(90deg, #fb923c, #f59e0b);
}

/* Card/Step-Grundlayout */
.surv-wrap{ display:grid; gap:12px; }
.step{
  border:1px solid var(--border); border-radius:14px; padding:12px;
  background: rgba(255,255,255,0.02);
}
.step h3{ margin:.15rem 0 .35rem; font-size:1.05rem; color:var(--accent); text-align:left; }
.step .hint{ color:var(--muted) }

.feedback{
  margin-top:.6rem; padding:.55rem .8rem; border-radius:10px; border:1px solid transparent;
}
.feedback.ok{ border-color:#22c55e; background: rgba(34,197,94,.12); color:#d1fadf; }
.feedback.err{ border-color:#ef4444; background: rgba(239,68,68,.12); color:#fee2e2; }

#surv-success{
  display:none; text-align:center; margin-top:.6rem;
}
#surv-success.show{ display:block; }
#surv-success .badge{
  padding:.4rem .6rem; border-radius:999px; border:1px solid var(--border);
  background:#0f1a13; font-size:.95rem; display:inline-block; margin:.15rem;
}

/* Inputs */
input.choice, .choice input, .order-item select{ color: var(--text); }
.riddle-input::placeholder{ color: var(--muted); opacity:.85; }

/* Step A – Order UI */
.order-list{ display:grid; gap:8px; }
.order-item{
  display:flex; align-items:center; gap:8px;
  background:#0e170f; border:1px solid #2b3c2f; border-radius:10px; padding:8px;
}
.order-item select{
  appearance:none; border:1px solid #2b3c2f; background:#0f1a13; color:var(--text);
  padding:.45rem .6rem; border-radius:10px;
}

/* Step B – Buckets Drag&Drop */
.b-grid{ display:grid; gap:10px; }
@media (min-width:680px){ .b-grid{ grid-template-columns: 1fr 1fr; } }

.b-bank, .b-bucket{
  border:1px dashed #2b3c2f; border-radius:12px; padding:10px; min-height:84px;
  background:#0f1a13;
}
.b-bank h4, .b-bucket h4{ margin:.2rem 0 .5rem; font-size:.95rem; color:var(--muted); }

.b-chip{
  touch-action:none; user-select:none; cursor:grab;
  display:inline-flex; align-items:center; justify-content:center;
  padding:.45rem .6rem; border-radius:10px; border:1px solid #2b3c2f; background:#121f17; color:var(--text);
  min-height:36px; margin:4px; font-size:.95rem;
}
.b-chip:active{ cursor:grabbing }

.b-bucket{ position:relative; }
.b-bucket.ok{ outline:2px solid var(--ok); outline-offset:2px; }
.b-bucket .b-meta{
  position:absolute; right:8px; bottom:6px; font-size:.8rem; color:var(--muted);
}

/* micro animation */
@keyframes popIn { from{ transform:scale(.98); opacity:0 } to{ transform:scale(1); opacity:1 } }
.step.done{ outline:2px solid var(--ok); outline-offset:2px; animation: popIn .25s ease }

/* Buckets-Spalte spacing */
.b-col{ display:grid; gap:12px; }

/* Drop-Fläche in Buckets */
.b-bucket .b-drop{
  display:flex; flex-wrap:wrap; gap:8px; min-height:46px;
}

/* mehr Luft unten für Meta-Zeile */
.b-bucket{ padding:12px 10px 32px; overflow:visible; }
.b-bucket .b-meta{ position:absolute; right:8px; bottom:6px; font-size:.8rem; color:var(--muted); }

/* Innenrahmen statt Outline-Offset */
.b-bucket.ok{
  outline:none; box-shadow:0 0 0 2px var(--ok) inset; border-radius:12px;
}

/* --- Mobile-Bonus für Step B --- */
@media (max-width:680px){
  .b-bank{ margin-bottom:12px; }
  .b-bucket{ min-height:130px; padding-bottom:40px; }
}

/* ==============================
   Teil C — Modernes Layout (nur C)
   ============================== */

/* Kartenraster: mobil 1 Spalte; ab 600px 2 Spalten (iPhone quer, Tablets, Laptops) */
.c-grid{
  display: grid;
  gap: 12px;           /* Abstand zwischen den Karten */
  margin-top: 8px;     /* etwas Luft unter der Hint-Zeile */
  grid-template-columns: 1fr;
}
@media (min-width:600px){
  .c-grid{ grid-template-columns: 1fr 1fr; }
}

/* Card-Container innerhalb Schritt C */
#stepC .c-card{
  border:1px solid var(--border);
  border-radius:14px;
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));
  padding:12px;
  box-shadow: 0 8px 20px rgba(0,0,0,.25);
}

/* kompakter, moderner Header */
.c-head{
  display:grid; gap:4px; margin-bottom:8px;
}
.c-badge{
  display:inline-flex; align-items:center; justify-content:center;
  width:28px; height:28px; border-radius:8px;
  background: #0f1a13;
  border:1px solid var(--border);
  color: var(--muted);
  font-weight:700; font-size:.9rem;
}
.c-head h4{
  margin:0; font-size:1.02rem; color:var(--accent);
}
.c-sub{
  margin:0; color:var(--muted); font-size:.92rem;
}

/* -----------------------------
   C1 & C4: Chips (Toggle)
   ----------------------------- */
.c-chiprow{
  display:flex; flex-wrap:wrap; gap:8px;
}

/* Visueller, aber zugänglicher Input */
.c-vis{ position:absolute; opacity:0; width:1px; height:1px; pointer-events:none; }

.c-chip{
  position:relative;
  display:inline-flex; align-items:center; gap:.45rem;
  border:1px solid var(--border);
  background:#0f1a13;
  padding:.55rem .7rem;
  border-radius:999px;
  color:var(--text);
  cursor:pointer;
  transition: transform .06s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
  box-shadow: 0 2px 8px rgba(0,0,0,.15);
}
.c-chip:hover{ transform: translateY(-1px); }
.c-chip:active{ transform: translateY(0); }

.c-chip__label{ line-height:1.2; }

/* Häkchen vor dem Text, wenn aktiv */
.c-chip__label::before{ content:""; }
.c-chip input:checked + .c-chip__label::before{
  content:"✓";
  margin-right:.45rem;
}

/* aktiver Zustand über :has – Ring/Glow */
.c-chip:has(input:checked){
  border-color: rgba(34,197,94,.6);
  box-shadow: 0 0 0 2px rgba(34,197,94,.35) inset, 0 6px 16px rgba(0,0,0,.25);
  background: linear-gradient(180deg, rgba(34,197,94,.12), rgba(34,197,94,.06));
}

/* -----------------------------
   C2: moderne Reihenfolge-UI (Selects behalten)
   ----------------------------- */
.c-order{ display:grid; gap:8px; }
.c-order__row{
  display:grid; grid-template-columns: 1fr auto; gap:8px;
  align-items:center;
  background:#0e170f; border:1px solid #2b3c2f; border-radius:12px; padding:8px;
}
.c-order__label{ font-size:.96rem; }
.c-select{
  appearance:none;
  border:1px solid #2b3c2f; background:#0f1a13; color:var(--text);
  padding:.48rem .65rem; border-radius:10px;
  min-width:64px; text-align:center;
}
.c-order__sel{ display:flex; align-items:center; }

/* -----------------------------
   C3: Szenarien als Card-Radios
   ----------------------------- */
.c-cards{ display:grid; gap:10px; }
.c-scenario{
  border:1px solid var(--border); border-radius:12px; padding:10px;
  background:#0f1a13; margin:0;
}
.c-scenario__q{
  margin:0 0 .5rem; color:var(--text); font-weight:600; font-size:.98rem;
}
.c-cardradio{
  display:block; margin:.35rem 0 0; cursor:pointer;
}
.c-cardradio__body{
  display:flex; align-items:center; gap:10px;
  border:1px solid #2b3c2f; border-radius:12px; padding:.55rem .7rem;
  background:#0e170f;
  transition: box-shadow .2s ease, transform .06s ease, border-color .2s ease, background .2s ease;
}
.c-cardradio__icon{ font-size:1.05rem; opacity:.9; }
.c-cardradio__label{ font-size:.96rem; }

.c-cardradio:hover .c-cardradio__body{ transform: translateY(-1px); }
.c-cardradio:active .c-cardradio__body{ transform: translateY(0); }
.c-cardradio input:checked ~ .c-cardradio__body{
  border-color: rgba(96,165,250,.6);
  box-shadow: 0 0 0 2px rgba(96,165,250,.35) inset, 0 6px 16px rgba(0,0,0,.25);
  background: linear-gradient(180deg, rgba(96,165,250,.12), rgba(96,165,250,.06));
}

/* Abstände/Flexibilität auf sehr kleinen Geräten */
@media (max-width:420px){
  #stepC .c-card{ padding:10px; }
  .c-order__row{ grid-template-columns: 1fr 86px; }
  .c-scenario__q{ font-size:.95rem; }
  .c-cardradio__label{ font-size:.94rem; }
  .c-chip{ padding:.5rem .65rem; }
}

/* ==============================
   Teil D – Pflanzen: Grid mit Areas (robust)
   ============================== */

.plant-bank{
  display:flex; flex-wrap:wrap; gap:8px;
  border:1px dashed var(--border); border-radius:12px;
  padding:10px; background:#0f1a13; margin-bottom:10px;
}
/* Chips in der Bank bleiben kompakt */
.plant-bank .plant-chip{ width:110px; height:110px; }

.plant-chip{
  touch-action:none; user-select:none; cursor:grab;
  border:1px solid #2b3c2f; border-radius:10px; overflow:hidden; background:#0d1410;
}
.plant-chip img{ width:100%; height:100%; object-fit:cover; display:block; }
.plant-chip.dragging{ opacity:.9; box-shadow:0 14px 30px rgba(0,0,0,.4); }

.plant-table{ display:grid; gap:8px; }

/* Desktop/Grundlayout: 3 Spalten (Paar | Essbar | Giftig) */
.pt-row{
  display:grid;
  grid-template-areas: "pair edible toxic";
  grid-template-columns: 120px 1fr 1fr;
  gap:8px;
}
.pt-head{ color:var(--muted); }
.pt-col{
  border:1px solid var(--border); border-radius:10px; background:#0f1a13; padding:8px;
}
.pt-pair{
  grid-area:pair; display:flex; align-items:center; justify-content:center; background:#0e170f;
}
.pt-headcol{ text-align:center; font-weight:600; }

/* Spaltenzuweisung, unabhängig vom DOM */
.pt-row > .pt-col:nth-child(2){ grid-area: edible; } /* Essbar */
.pt-row > .pt-col:nth-child(3){ grid-area: toxic; }  /* Giftig */

/* Drop-Zellen: nie Rahmen sprengen */
.pt-drop{
  position:relative; min-height:140px;
  overflow:hidden; padding:8px; border-radius:10px; box-sizing:border-box;
}
.pt-dropinner{ display:flex; align-items:center; justify-content:center; min-height:110px; }
.pt-placeholder{ color:var(--muted); opacity:.85; font-size:.9rem; }

/* Bild im Drop: flexibel mit 1:1 */
.pt-drop .plant-chip{ width:100%; height:auto; aspect-ratio:1/1; border-radius:10px; }
.pt-drop .plant-chip img{ width:100%; height:100%; object-fit:cover; display:block; }

.pt-name{
  margin-top:6px; font-size:.92rem; color:var(--text);
  line-height:1.2; word-break:break-word; overflow-wrap:anywhere; hyphens:auto;
}

.pt-drop.ok{ box-shadow:0 0 0 2px var(--ok) inset; }
.pt-drop.err{ box-shadow:0 0 0 2px var(--err) inset; }

/* Breakpoint 1: ≤700px → Paar über beide Spalten, darunter Essbar/Giftig */
@media (max-width:700px){
  .pt-row{
    grid-template-areas:
      "pair pair"
      "edible toxic";
    grid-template-columns: 1fr 1fr;
    gap:8px;
  }
  .pt-pair{ justify-content:flex-start; padding:10px; }
  .pt-head .pt-pair{ background:transparent; }
}

/* Breakpoint 2: ≤380px → alles gestapelt */
@media (max-width:380px){
  .pt-row{
    grid-template-areas:
      "pair"
      "edible"
      "toxic";
    grid-template-columns: 1fr;
  }
  .pt-drop{ min-height:42vw; } /* relative Höhe, damit Bilder nicht mikroskopisch werden */
}

/* Robustheit */
*, *::before, *::after{ box-sizing: border-box; }
